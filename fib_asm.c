#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>

const uint8_t assign_program[] = {
		0x00, 0x01, // assign
		0x11, 0x00, // R1
		0x11, 0x01, 0x00, 0x00, 0x0B, 0x00, // R1 = 10

		0x00, 0x01, // assign
		0x41, 0x00, // R4
		0x51, 0x01, 0x00, 0x00, 0x01, 0x00, // R5 = 1

// Label_0 (0x0A):
		0x00, 0x01, // assign
		0x21, 0x00, // R2
		0x11, 0x00, // R1

		0x00, 0x01, // assign
		0x11, 0x00, // R1
		0x11, 0x01, 0x00, 0x01, 0x01, 0x00, // R1 - 1

		0x00, 0x01, // assign
		0x31, 0x00, // R3
		0x31, 0x01, 0x00, 0x00, 0x06, 0x00, // R3 = 6

		0x00, 0x01, // assign
		0x31, 0x00, // R3
		0x23, 0x01, 0x10, 0x01, 0x00, 0x00, // R2 - R1

		0x00, 0x01, // assign
		0x31, 0x00, // R3
		0x31, 0x01, 0xFF, 0x00, 0xFF, 0x01, // R3 + -1

		0x00, 0x01, // assign
		0x01, 0x00, // R0
		0x31, 0x01, 0x00, 0x00, 0x26, 0x01, // R3 + Label_1

// Label_1 (0x26):
		0x00, 0x01, // assign
		0x01, 0x00, // R0
		0x31, 0x01, 0x00, 0x00, 0x31, 0x00, // R3 = Label_3

		0x00, 0x01, // assign
		0x01, 0x00, // R0
		0x31, 0x01, 0x00, 0x00, 0x30, 0x00, // R3 = Label_2

// Label_2 (0x30):
		0x64, 0x00, // HCF

// Label_3 (0x31):
		0x00, 0x01, // assign
		0x51, 0x00, // R5
		0x53, 0x01, 0x40, 0x00, 0x00, 0x01, // R5 + R4

		0x00, 0x01, // assign
		0x61, 0x00, // R6
		0x41, 0x00, // R4

		0x00, 0x01, // assign
		0x41, 0x00, // R4
		0x51, 0x00, // R5

		0x00, 0x01, // assign
		0x51, 0x00, // R5
		0x61, 0x00, // R6

		0x00, 0x01, // assign
		0x01, 0x00, // R0
		0x31, 0x01, 0x00, 0x00, 0x0A, 0x00 // R3 = Label_0
};

int main(void)
{
	FILE *fd = fopen("assign.illiac", "w");
	fwrite(assign_program, sizeof(assign_program), sizeof(uint8_t), fd);
	fclose(fd);
	return 0;
}
